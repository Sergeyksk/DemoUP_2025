# "Организация портала командировок"


## Контекст

Необходимо разработать архитектуру решения портала организации командировок сотрудников, с возможностью подбора билетов и размещения,
согласования, покупки и отчётности, для предприятия в 5 тысяч человек, в среднем 2 командировки в год
на сотрудника. Внутренние бизнес-процессы и состав корпоративных систем давно устоялись и не меняются.
Внешние системы продажи билетов и букинга гостиниц могут быть разные и меняться со временем.

## Варианты решения



Система является классическим веб-приложением с простой базой данных состоящей из нескольких таблиц, а именнно таблица сотрудников, 
таблица командировок, таблица бронирований, таблица согласований и другие таблицы(вариативно) 

В связи с тем, что бизнес-процесс закупки билетов, согласований и других процессов жестко стандартизирован и закреплен в корп. политике компании, а также подвержен минимуму изменений, то доработки системы и выпуск релизов будет связан с баг-фиксом или изменениями, связанными с интеграцией с внешними сервисами,
осуществляющими процесс продажи билетов и букинга гостиниц.


Каждый из внешних сервис-партнеров будет предоставлять RestFullAPI, дающий примерно одинаковую функциональность, но различающийся контрактом(составом полей) для передачи в API.

Авторизация в системе будет осуществляться через SSO-компании


## Решение


## Вариант 1.
В связи с тем, что количество изменений во времени минимально, данные сильно связаны, а именно почти каждая сущность и таблица системы связана 1 к 1, то предлагается выбрать архитектурный паттерн
Layered architecture, а именно MVC.


## Последствия

Плюсы:

Минимум компонентов и классическое веб-приложение
Минимум сетевых взаимодействий
Почти любой веб-разработчик сможет доработать приложение или внести багфикс при наличии достаточной документации по приложению


Минусы:

В случае отказа одного из компонентов падает все приложение.



## Вариант 2.

В связи c тем, что система имеет модульность в виде подбора билетов, согласования, и каждая из этих модулей достаточно сильно взаимосвязаны по логике и одна операция вытекает из другой, то предлагается выбрать 
архитектуру Service-based architecture. 

Плюсы:

Сервисы системы распределяются на модули "Бронирование", "Согласование", "Покупки", что позволяет из разделить по бизнес-логике, но ожноврменно хранить в одной базе данных
В случае смены внешних систем, функции валидации и обратной совместимости будут вынесены в отдельные  сервисы, что скажется на упрощении разработки и исключит ошибки.
Упрощение интеграций с корпоративными системами, можно всегда добавить новый сервис, который будет забирать любые данные из единой бд

Минусы:

В случае отказа базы данных, падает все приложение.
Сервисы растут по объему и могут быть перегружены бизнес-логикой

# Решение
Принимаем решение использовать монолитную архитектуру из-за ее относительно низкой стоимости разработки, небольших требований к масштабируемости и стабильности бизнес-процессов. Также стоит отметить, что это внутренний продукт, который не приносит прямой прибыли.

# Действия
Для минимизации рисков, важно тщательно планировать и контролировать процесс развертывания, поддержки и мониторинга монлита на каждой из частей MVC. Необходимо закрепить и разграничить модули и таблицы за определеннымим таблицами, чтобы избежать сильной связанности, что позволит в будущем, при необходимости, перейти в микросервисы.